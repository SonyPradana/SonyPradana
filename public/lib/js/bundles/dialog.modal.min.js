const def_pref={type:"search-by-name-adress",status:"run",parrent:$event("modal-dialog"),trigger:"show-modal",result:function(t){console.table(t)},content:{input_nama:$id("input-modal-nama"),input_alamat:$id("input-modal-alamat"),table_result:$id("modal-table-body")}};function modal_dialog(t){function e(t,e="text"){let n=document.createElement("th");return"html"==e?n.innerHTML=t:"text"==e&&(n.innerText=t),n}t=Object.assign(def_pref,t),$event(t.trigger).click((function(){t.content.table_result.innerHTML=null,t.parrent.show()})),$event("modalClose").click((function(){t.parrent.hidden()})),$event("btn-modal-close").click((function(){t.parrent.hidden()})),window.onclick=function(e){e.target==t.parrent.el&&t.parrent.hidden()},$event("btn-modal-cari").click((function(){let n=t.content.input_nama.value;if(null==n)return!1;let a=t.content.input_alamat.value;$json("/api/ver1.0/kia-anak/search.json?strict-search=on&"+`main-search=${n}&alamat-search=${a}`).then((n=>{"ok"==n.status&&(t.status="ok",function(n){t.content.table_result.innerHTML=null;let a=1;if(0==n.length)return t.content.table_result.innerText="data not found",!1;n.forEach((n=>{let l=document.createElement("tr"),i=document.createElement("th"),r=document.createElement("button");r.className="btn rounded light blue fill number",r.innerText="pilih",r.addEventListener("click",(function(){t.result(n),t.status="found",t.parrent.hidden()})),i.appendChild(r),l.appendChild(e(a)),l.appendChild(e(n.nama)),l.appendChild(e(n.tanggal_lahir)),l.appendChild(e(n.nama_kk)),l.appendChild(i,"html"),t.content.table_result.appendChild(l),a++}))}(n.data))}))}))}
